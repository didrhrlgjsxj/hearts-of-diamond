게임 메카닉 설명

================================

### 1. 부대 능력치 (Unit Stats)

각 부대는 하위 분대(Squad)들의 능력치를 합산하여 총 능력치가 결정됩니다.

*   **화력 (Firepower)**: 적의 조직력(초록색 바)에 가하는 피해량을 결정합니다. 화력이 높을수록 적의 전투 효율을 빠르게 떨어뜨릴 수 있습니다.

*   **대인 공격력 (Soft Attack)**: 장갑이 없거나 낮은 '소프트' 타겟(보병 등)에게 가하는 병력(주황색 바) 피해량을 결정합니다.

*   **대물 공격력 (Hard Attack)**: 장갑이 높은 '하드' 타겟(기갑 등)에게 가하는 병력 피해량을 결정합니다. 적의 장갑을 관통하는 데 사용됩니다.

*   **정찰력 (Reconnaissance)**: 적을 발견하는 능력입니다. 이 능력치가 높을수록 적을 더 멀리서 탐지할 수 있습니다. (현재는 `detectionRange`로 구현)

*   **장갑 (Armor)**: 적의 공격으로부터 부대를 보호하는 능력입니다. 특히 대인 공격력에 의한 피해를 크게 감소시키며, 대물 공격력에 의한 피해도 일부 막아냅니다. 상위 부대의 장갑 수치는 소속된 모든 분대의 장갑 평균값으로 계산됩니다.

---

### 2. 유닛 타입별 특성 (Unit Type Specializations)

모든 부대의 기본 구성 단위는 분대(Squad)이며, 각 분대는 고유한 타입을 가집니다.

*   **보병 (Infantry)**: 부대의 최대 조직력을 크게 증가시켜 전투 지속력을 높입니다.
*   **정찰 (Recon)**: 정찰력이 매우 높아 넓은 시야를 제공합니다. 여단(Brigade)은 기본적으로 1개의 정찰 분대를 포함합니다.
*   **정찰 (Recon)**: 정찰력이 매우 높아 넓은 시야를 제공합니다.
*   **기갑 (Armor)**: 높은 장갑, 화력, 공격력을 모두 갖춘 강력한 유닛입니다.
*   **포병 (Artillery)**: 화력에 극도로 특화되어 있어 적의 조직력을 파괴하는 데 매우 효과적입니다.
*   **공병 (Engineer)**: 대물 공격력이 매우 높아 적의 장갑화된 유닛이나 방어 시설을 파괴하는 데 특화되어 있습니다.

---

### 3. 피해 계산 공식 (Damage Calculation Formula)

전투 시 피해는 조직력 피해와 병력 피해로 나뉘어 계산됩니다.

1.  **조직력 피해**: 공격자의 `화력`을 기반으로 계산되며, 방어자의 조직력(초록색 바)을 직접 감소시킵니다.

2.  **병력 피해**:
    *   공격자의 `대물 공격력`이 방어자의 `장갑`보다 높으면, 그 차이만큼 '관통 피해'가 발생합니다.
    *   공격자의 `대인 공격력`에 의한 피해는 방어자의 `장갑` 수치에 따라 크게 감소합니다.
    *   이 두 피해를 합산하여 기본 병력 피해가 결정됩니다.
    *   방어자의 조직력이 낮을수록 최종적으로 받는 병력 피해량이 증폭됩니다. 조직력이 모두 소진되면 병력이 급격히 감소하기 시작합니다.

---

### 4. 부대 역할 및 시각적 표현 (Unit Roles & Visual Rules)

이 게임에서 부대는 역할에 따라 '지휘 부대'와 '전투 부대'로 나뉩니다.

*   **전투 부대 (Combat Unit)**: **중대(Company)**가 이 게임의 실질적인 전투 수행 단위입니다. 모든 공격, 방어, 피해 계산은 중대를 기준으로 이루어집니다. 따라서 중대 아이콘은 불투명하게 표시되어 전장에서 명확하게 식별됩니다.

*   **지휘 부대 (Command Unit)**: **대대(Battalion)**와 **여단(Brigade)**은 직접 전투를 수행하지 않는 지휘 부대입니다. 이들의 주된 역할은 여러 중대를 하나의 부대로 묶어 관리하고, 소속된 중대들에게 지휘 보너스나 특수 능력(향후 추가될 기능)을 제공하는 것입니다.
    *   지휘 부대는 여러 목적(보병, 기갑, 포병 등)을 가진 중대들을 조합하여 편성할 수 있는 '컨테이너'와 같습니다.
    *   이러한 역할을 시각적으로 나타내기 위해, 지휘 부대의 아이콘은 반투명하게 표시됩니다.
    *   **본부(HQ) 및 진형 시스템**: 모든 지휘 부대는 '본부(HQ)' 역할을 하는 중대를 가집니다. 지휘 부대 자체는 개념적인 '깃발'이며, 실제 위치는 항상 본부 중대의 위치를 따라갑니다.
    *   **중대 역할**: 휘하의 다른 중대들은 '정찰대', '타격대', '유지대' 등의 역할을 부여받습니다.
    *   **동적 진형**: 부대는 항상 특정 방향(이동 방향 또는 적 방향)을 바라봅니다. 각 중대는 자신의 역할에 따라 본부 중대를 기준으로 정해진 대형(정찰대는 전방, 타격대는 중앙, 유지대는 후방)을 유지하며 자동으로 위치를 조정합니다.
    *   **유기적 전투**: 전투가 시작되면, 각 전투 중대는 상위 부대의 이동 명령과 별개로 가장 가까운 적을 향해 능동적으로 이동하고 교전합니다.
    *   **정찰 정보 공유**: 적 탐지는 상위 부대(여단/대대) 단위로 이루어집니다. 상위 부대의 총 정찰력(`totalReconnaissance`)에 의해 탐지 범위가 결정되며, 일단 적 부대가 탐지되면 그 정보는 소속된 모든 중대에게 공유됩니다. 중대들은 이 공유된 정보를 바탕으로 개별 전투에 돌입합니다.
    *   지휘 부대의 병력과 조직력 바는 소속된 모든 중대의 상태를 종합한 평균값을 보여줍니다.

*   **아이콘**: 모든 부대는 사각형 아이콘으로 표시됩니다. 아이콘의 배경색은 소속된 팀(블루/레드)을 나타냅니다.

*   **규모별 크기**: 부대의 규모(Echelon)가 클수록 아이콘의 크기가 커집니다. (여단 > 대대 > 중대 > 소대 > 분대 순)

*   **부대 기호**: 각 아이콘 위에는 부대의 규모를 나타내는 표준 군대 기호가 표시됩니다 (X: 여단, ||: 대대, |: 중대 등).